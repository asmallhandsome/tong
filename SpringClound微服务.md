![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691127762841-b121dc2d-30e5-4d52-b27f-a5f4b26fdec3.png#averageHue=%23ebecde&clientId=u8b9ee88c-b210-4&from=paste&height=601&id=u3e11ad00&originHeight=751&originWidth=1441&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=637162&status=done&style=none&taskId=ub19bdb04-1068-45b8-94da-89022f5a7b8&title=&width=1152.8) 一、微服务的特点
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688437727313-2b8288e1-c99a-4f77-95fe-186c9c12a03c.png#averageHue=%23ebebeb&clientId=u570200a8-c0ef-4&from=paste&height=202&id=ucf91db35&originHeight=253&originWidth=1219&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=145526&status=done&style=none&taskId=uceeafb87-d830-46f5-ad91-3fd066dea6f&title=&width=975.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692178957713-051624ac-14b0-44dd-9c9c-9d54ae1ac060.png#averageHue=%23d7c6c3&clientId=u153618ae-8856-4&from=paste&height=496&id=uf35464c0&originHeight=620&originWidth=1383&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=203728&status=done&style=none&taskId=ua194b5b9-2065-4efb-adb3-edb00e479d0&title=&width=1106.4)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692178980132-5702444b-a608-48dd-9672-ad6260722719.png#averageHue=%23f1e7e5&clientId=u153618ae-8856-4&from=paste&height=519&id=u29157088&originHeight=649&originWidth=1413&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=362194&status=done&style=none&taskId=uaef87724-9bf6-4460-bb72-a1134aafbd4&title=&width=1130.4)
二、SpringCloud和Springboot兼容性版本关系
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688438755391-f4bd865c-9f5d-484a-a7f3-9e3f223a37fc.png#averageHue=%23fbfafa&clientId=u570200a8-c0ef-4&from=paste&height=564&id=ubf76ddfb&originHeight=705&originWidth=1228&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=182649&status=done&style=none&taskId=u3d1c8e18-bddc-4692-95a7-5b1d999e280&title=&width=982.4)
三、微服务远程调用步骤
1.在配置类中声明注入bean对象RestTemplate
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688439425769-024e7402-4e39-4589-b309-2c60e5ce8051.png#averageHue=%23ecede8&clientId=u570200a8-c0ef-4&from=paste&height=539&id=u6d0ce0e0&originHeight=674&originWidth=1386&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=293107&status=done&style=none&taskId=u687bb324-2093-408b-ad0c-96ecdadc4e4&title=&width=1108.8)
2.在需要的业务层调用远程的方法(get或post)得到其他服务的数据（URL被写死了，下面的注册中心搭建会动态化）
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688439626746-16f55767-5430-48ea-a3f8-1f56cd2693d2.png#averageHue=%23edf0e5&clientId=u570200a8-c0ef-4&from=paste&height=555&id=uc9a2a1fb&originHeight=694&originWidth=1270&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=344744&status=done&style=none&taskId=uc978a79c-19b7-4c84-8ea4-9be824ee8a6&title=&width=1016)
微服务的调用方式的总结
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688439728043-5e35aa9a-ff3e-4782-8590-131450964523.png#averageHue=%23f0f0f0&clientId=u570200a8-c0ef-4&from=paste&height=221&id=u30d3151c&originHeight=276&originWidth=772&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=83621&status=done&style=none&taskId=u91edd222-2ab6-44e1-b5e1-83d634de254&title=&width=617.6)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688440309068-90c853f8-7d47-40f1-8f75-ffc14747bc9a.png#averageHue=%23eaeaea&clientId=u570200a8-c0ef-4&from=paste&height=155&id=uef6b2167&originHeight=194&originWidth=695&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=72591&status=done&style=none&taskId=ua844eef1-df7a-49f3-a67e-9793251ee54&title=&width=556)
四、Eureka注册中心（灵活的获得主机ip,端口，接口路径的信息）
1、`Eureka注册中心的概念认识`
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688441339649-5ccc42fe-4b4d-4523-9a47-2f4457c9bf13.png#averageHue=%23e4ebd3&clientId=u570200a8-c0ef-4&from=paste&height=737&id=u1557843e&originHeight=921&originWidth=1668&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=408666&status=done&style=none&taskId=u164d1e90-fa92-448b-86ba-40499560d95&title=&width=1334.4)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688441259306-bf3ea2b1-3194-4225-9920-9bf9ddf63765.png#averageHue=%23e7e7e7&clientId=u570200a8-c0ef-4&from=paste&height=489&id=u6151783d&originHeight=611&originWidth=1250&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=285311&status=done&style=none&taskId=ubbb7d3e5-25bc-48df-93fc-962e2f18f61&title=&width=1000)
2.Eureka注册中心的搭建(要创建单独的一个服务模块，然后设置三个步骤)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688456644261-55561764-0499-4193-9182-63f2c8a8fc0d.png#averageHue=%23f3f4f0&clientId=u570200a8-c0ef-4&from=paste&height=657&id=u2d585974&originHeight=821&originWidth=1388&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=337152&status=done&style=none&taskId=u1934d4f7-0182-44c4-b156-43d057310eb&title=&width=1110.4)
3.将对应模块注册到Eureke注册中心的过程（引依赖，声明服务名称（userservice、orderservice等），配置地址eureka的访问地址）
（1）在对应要注册的服务模块pom文件中加入如下依赖（。。。。eureka-client）声明客户端注册![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688457282398-1962544d-51be-46e9-a698-07b9d4143bc7.png#averageHue=%23e9efe3&clientId=u570200a8-c0ef-4&from=paste&height=509&id=uaeb20931&originHeight=636&originWidth=1410&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=485494&status=done&style=none&taskId=uc94b90ec-d170-4586-9669-b913895e77b&title=&width=1128)
（2）在对应服务模块的配置文件.properies或.yml文件中加入注册后再Eureka中的名字和访问地址
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691456267444-ab5656f1-143f-4ab6-bd88-bab6a32eda89.png#averageHue=%23ebf3e7&clientId=u58227ba4-6202-4&from=paste&height=273&id=u0de6a878&originHeight=341&originWidth=1161&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=280487&status=done&style=none&taskId=u02124544-d464-40c4-91cc-be97fe87a96&title=&width=928.8)

4.一个服务启动多个实例对象在Eureka中
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688457702361-7c0de6dc-4220-4e92-a464-f9d838081765.png#averageHue=%23f4f3f3&clientId=u570200a8-c0ef-4&from=paste&height=476&id=u0da3e316&originHeight=595&originWidth=1415&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=305150&status=done&style=none&taskId=uda00a4ca-4f85-45a3-9c53-ddbc38b4c38&title=&width=1132)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688457730015-1c6f40c4-250a-45ad-8cfa-60523edbb366.png#averageHue=%23efebeb&clientId=u570200a8-c0ef-4&from=paste&height=535&id=ua4f08a9a&originHeight=669&originWidth=1010&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=255613&status=done&style=none&taskId=u245a4f2e-afdd-42df-8e5d-d30afb8deba&title=&width=808)
5、微服务调用的注册（将固定URL代码变为动态url）和负载均衡
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688458678953-049a2a9f-9aa3-4f0b-bfa3-167c24afbb30.png#averageHue=%23eae8e7&clientId=u570200a8-c0ef-4&from=paste&height=518&id=u5cd6054f&originHeight=647&originWidth=1193&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=247390&status=done&style=none&taskId=u063ab5e5-1fa6-4e93-8798-0b47e431d7e&title=&width=954.4)

整个远程注册调用的总结
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688458862867-f3c3f765-267c-4b71-b00f-7f97f8f1c0da.png#averageHue=%23f1f1f1&clientId=u570200a8-c0ef-4&from=paste&height=506&id=u5583cf27&originHeight=632&originWidth=931&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=186440&status=done&style=none&taskId=u2e0d156a-445a-4fed-8595-959ecd3501c&title=&width=744.8)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690878557049-62477eaa-3114-41be-848c-b5a5eabfcec8.png#averageHue=%23f9f7f7&clientId=u16ef33c5-5b8d-4&from=paste&height=599&id=u6da5570d&originHeight=749&originWidth=1435&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=306812&status=done&style=none&taskId=u09d44b5c-63b7-49f6-951e-dc7457271b1&title=&width=1148)
负载均衡的原理和自定义加载规则
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688462220425-3eefb217-774d-43b8-9c13-ed2b8130e582.png#averageHue=%23f0f0f0&clientId=u570200a8-c0ef-4&from=paste&height=483&id=u9458baf6&originHeight=604&originWidth=786&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=185259&status=done&style=none&taskId=uafc25189-0e9e-4e6d-9b80-011e2d7c663&title=&width=628.8)
自定义均衡规则的两种方式
第一种是整个服务消费者调用时均衡的全局设置，第二种是对提供服务的服务名称进行配置规则，单个服务有用
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688462314423-962ad293-8d63-4946-8432-8e737ac244c6.png#averageHue=%23edeee9&clientId=u570200a8-c0ef-4&from=paste&height=579&id=u40bc85b4&originHeight=724&originWidth=1304&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=248909&status=done&style=none&taskId=u785c8dff-b8d5-4d90-a728-021b0d31da2&title=&width=1043.2)

五、Nacos注册中心
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688464315008-04fff236-e933-4375-b741-19c1c2b3d1e0.png#averageHue=%23f8f8f8&clientId=u570200a8-c0ef-4&from=paste&height=430&id=u5f200fb1&originHeight=537&originWidth=780&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=112179&status=done&style=none&taskId=u3a66bf24-5f61-4ee8-9bfa-1a16a506fff&title=&width=624)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690881877460-9f2042bf-1d02-4d7d-bd92-2502df8459d7.png#averageHue=%23f4f4f3&clientId=u16ef33c5-5b8d-4&from=paste&height=502&id=u6163d76d&originHeight=627&originWidth=1010&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=242071&status=done&style=none&taskId=uc184fec1-fd53-4925-9ab0-3926cecadac&title=&width=808)
在应用服务（userservice）中注释eureka的配置并加上nacos配置信息
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691111485734-049417a8-4efb-4b4e-8245-dccf4732415b.png#averageHue=%23eaf1e6&clientId=u8b9ee88c-b210-4&from=paste&height=457&id=ufca0faa2&originHeight=571&originWidth=1024&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=355195&status=done&style=none&taskId=udea06751-e325-404f-959c-8d60a22c111&title=&width=819.2)
加上nacos配置信息
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690882052888-16be9a2c-1087-4875-aae0-d347282a8f30.png#averageHue=%23ecf2e7&clientId=u16ef33c5-5b8d-4&from=paste&height=344&id=ucb482d6b&originHeight=430&originWidth=1169&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=320603&status=done&style=none&taskId=ub38851b7-16be-4115-ba06-0651a99403d&title=&width=935.2)
集群配置
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688464585469-495ab5eb-804e-4cbf-aa22-06baf6683409.png#averageHue=%23f4f4f4&clientId=u570200a8-c0ef-4&from=paste&height=447&id=uba203982&originHeight=559&originWidth=846&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=140954&status=done&style=none&taskId=u39e0e031-76d5-44d6-93c5-cfc59f0f0cb&title=&width=676.8)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690882594978-88aa3737-4ae8-4d8e-9b32-9b802684f4ad.png#averageHue=%23f7f7f7&clientId=u16ef33c5-5b8d-4&from=paste&height=434&id=ua75bbb7c&originHeight=542&originWidth=1049&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=201678&status=done&style=none&taskId=u65f59fd2-31c9-46dc-9a39-9e2db92ce51&title=&width=839.2)
集群就近访问规则设置
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690882491889-ed0b379c-b4e9-42f7-bae8-0fae9746ea99.png#averageHue=%23ecf0e6&clientId=u16ef33c5-5b8d-4&from=paste&height=93&id=uff813d7b&originHeight=116&originWidth=941&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=108070&status=done&style=none&taskId=ua4207f15-b67b-45e1-883b-f2f790ead14&title=&width=752.8)

![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688464903298-67b6b590-02be-4980-80f5-99dcd574716f.png#averageHue=%23f7f6f6&clientId=u570200a8-c0ef-4&from=paste&height=419&id=u3e8030e6&originHeight=524&originWidth=1038&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=154779&status=done&style=none&taskId=u77ecc31a-4828-4b2f-ac0e-c04958b967f&title=&width=830.4)
设备访问权重配置过程（在nacos客户端设置）：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691112033078-269f11a2-bc7c-42f0-aa5f-0d5db0406b50.png#averageHue=%23f1f1f1&clientId=u8b9ee88c-b210-4&from=paste&height=553&id=u0460617d&originHeight=691&originWidth=1216&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=224972&status=done&style=none&taskId=u3c27829f-d300-4aee-8d76-ee4f678dfc2&title=&width=972.8)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691112192367-bab7ca22-54ae-492a-af17-08f2649427c8.png#averageHue=%23ebebeb&clientId=u8b9ee88c-b210-4&from=paste&height=169&id=G6vNs&originHeight=211&originWidth=721&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=58811&status=done&style=none&taskId=u5bc228f5-a0b2-481b-bfca-21c57dc81e0&title=&width=576.8)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691112374801-b005850c-c2cc-46b2-8f15-91347a97deeb.png#averageHue=%23f3f3f3&clientId=u8b9ee88c-b210-4&from=paste&height=165&id=u5ac0e877&originHeight=206&originWidth=875&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=47796&status=done&style=none&taskId=ua8d4fd22-0adc-4d3b-823f-ec2d35ddbce&title=&width=700)
1.在nacos客户端控制台创建namespace隔离环境，如：Dev（生产环境），生成唯一的id，在需要隔离的服务yml中配置namespace：id
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691112596688-f7783934-8569-4d39-8f7f-b27a35a06e97.png#averageHue=%23ecf2e7&clientId=u8b9ee88c-b210-4&from=paste&height=138&id=uefa71ec1&originHeight=172&originWidth=925&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=129047&status=done&style=none&taskId=u298f38a6-703f-4fa2-9db1-86154298942&title=&width=740)
临时实例与非临时实例的对比：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688467649395-560e6608-e42e-4b77-bdeb-72558f9d9b44.png#averageHue=%23e7ede5&clientId=u62470406-77ee-4&from=paste&height=602&id=ua361a950&originHeight=753&originWidth=1323&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=253054&status=done&style=none&taskId=uc1e15d9d-58fa-473a-82a3-c829cad0e8d&title=&width=1058.4)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688467830777-f5f78495-8dff-48b5-ba12-2960db88efbe.png#averageHue=%23999998&clientId=u62470406-77ee-4&from=paste&height=414&id=u2ea34a39&originHeight=518&originWidth=791&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=242680&status=done&style=none&taskId=u8cfd5ff1-f4b2-4ce7-a8bd-80058a0d19d&title=&width=632.8)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691458101719-14c19eb3-bbf9-4bf3-a05d-d3e8d3cfa39e.png#averageHue=%23f5f0ed&clientId=u58227ba4-6202-4&from=paste&height=416&id=ub91880e4&originHeight=520&originWidth=846&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=147861&status=done&style=none&taskId=u7de6dbbc-1eed-4754-9a4c-4f806f9fdab&title=&width=676.8)
统一配置管理----各服务配置文件的管理文件（同服务不同实例之间）
1.创建配置文件![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691114158030-be7bab39-d3ed-4f16-b4d0-d16e6719386b.png#averageHue=%23e8eae7&clientId=u8b9ee88c-b210-4&from=paste&height=303&id=yaf19&originHeight=379&originWidth=1670&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=219299&status=done&style=none&taskId=uee9d1104-0d48-4dbe-be02-394e123cac4&title=&width=1336)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691114208765-62d41a4f-bbfb-4255-bce7-477f52d3cb70.png#averageHue=%23a09f9f&clientId=u8b9ee88c-b210-4&from=paste&height=463&id=cXfCk&originHeight=579&originWidth=933&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=160456&status=done&style=none&taskId=uc73b0136-56d0-4a1c-aeb6-6982408efb3&title=&width=746.4)
2.在服务代码中配置
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688472053341-7be703b3-03e7-4b2d-8473-74c03b103cad.png#averageHue=%23eef4e9&clientId=u62470406-77ee-4&from=paste&height=610&id=ud6d255d3&originHeight=763&originWidth=1641&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=375949&status=done&style=none&taskId=u891839f6-783a-4264-a978-8c86a0aadc2&title=&width=1312.8)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688472244073-6125d92d-c78b-4fe4-8212-bcdf2b3cb201.png#averageHue=%23f4f4f4&clientId=u62470406-77ee-4&from=paste&height=477&id=u173ddd9c&originHeight=596&originWidth=839&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=148112&status=done&style=none&taskId=u5d8760f7-b33d-4114-b80e-10642e68ec8&title=&width=671.2)
热更新配置
1.nacos配置文件的热更新配置---@RefreshScope与@Value搭配![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691114923948-c98e3114-00f7-4bbc-b424-b0ffe5438243.png#averageHue=%23e7ede2&clientId=u8b9ee88c-b210-4&from=paste&height=428&id=u7a2c00ec&originHeight=535&originWidth=1140&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=410269&status=done&style=none&taskId=u683f2ef3-c64e-449c-b92d-6db8511f535&title=&width=912)
2、nacos配置文件的热更新配置---@ConfigurationProperties（prefix=“”）与
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691115050918-4688e006-5aa2-4b58-8ee4-ca6c8130c507.png#averageHue=%23eef3e7&clientId=u8b9ee88c-b210-4&from=paste&height=224&id=u5e5a1e73&originHeight=280&originWidth=756&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=128201&status=done&style=none&taskId=udb28c229-8cb4-4b86-9e8a-f2e6e9ce401&title=&width=604.8)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691115067768-32b60797-1c67-4105-995c-2357f534a569.png#averageHue=%23edf3e5&clientId=u8b9ee88c-b210-4&from=paste&height=198&id=ue91d7ff2&originHeight=248&originWidth=1113&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=209837&status=done&style=none&taskId=u62288e4d-a5b7-4b86-b6f4-6f787bddae3&title=&width=890.4)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688526745266-ada2c3f6-cd89-4089-888f-d739425d3d7b.png#averageHue=%23f3f3f3&clientId=uee2e8f91-4f06-4&from=paste&height=477&id=u0fbc7877&originHeight=596&originWidth=931&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=141687&status=done&style=none&taskId=u8474c205-de68-496e-af2d-5302f0d8a02&title=&width=744.8)
一个服务多环境开发时，配置共享配置文件-----服务名.yml,如userService.yml：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691115664302-7617abe4-482f-4953-b23c-8b2c36f2e7ed.png#averageHue=%23f5f3f3&clientId=u8b9ee88c-b210-4&from=paste&height=485&id=u593f1753&originHeight=606&originWidth=1478&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=277756&status=done&style=none&taskId=u805090e9-b025-42a4-a47b-70d721f2c05&title=&width=1182.4)
在nacos控制台创建并写入配置信息：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691115741993-9432ca8b-14b3-4cb1-ab85-5bb9dd35b372.png#averageHue=%23fcfcfc&clientId=u8b9ee88c-b210-4&from=paste&height=356&id=u9109676a&originHeight=445&originWidth=1319&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=98471&status=done&style=none&taskId=u48cd8167-d2b1-4709-a232-c87d59e1638&title=&width=1055.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691115768906-af886766-1dfc-4496-9acd-d32adf4e1e1c.png#averageHue=%23595959&clientId=u8b9ee88c-b210-4&from=paste&height=99&id=u9a64fe42&originHeight=124&originWidth=1398&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=47698&status=done&style=none&taskId=u7beff9b4-e5af-4b44-88a3-15787ee54e4&title=&width=1118.4)
总结配置文件加载的优先级：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691115808317-4b9e599f-3f12-4c83-85ea-81c0637f0857.png#averageHue=%23f6f6f6&clientId=u8b9ee88c-b210-4&from=paste&height=306&id=u16515429&originHeight=382&originWidth=1085&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=72680&status=done&style=none&taskId=u8fe96d8e-ee54-4551-bf83-38e712b6eae&title=&width=868)
nacos集群搭建过程：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691116235764-532e2ae9-b88a-43dd-9b8f-abd8f22603a2.png#averageHue=%23f0f0f0&clientId=u8b9ee88c-b210-4&from=paste&height=538&id=u23cad8e9&originHeight=672&originWidth=1214&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=137720&status=done&style=none&taskId=u502bcc05-c9fb-4e0f-aa48-672a40eb85d&title=&width=971.2)
3.
(1)配置nacos的conf
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691116283842-4341a840-7689-4928-8da8-a379f77b551a.png#averageHue=%23f8f7f7&clientId=u8b9ee88c-b210-4&from=paste&height=512&id=u75b189ea&originHeight=640&originWidth=1082&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=209011&status=done&style=none&taskId=u049ade7d-0152-4fe5-8b50-fdbad5b64ba&title=&width=865.6)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691116313118-2bc43a78-63bd-4a54-9855-88595194cb61.png#averageHue=%23fbfbfb&clientId=u8b9ee88c-b210-4&from=paste&height=111&id=u9ff753c1&originHeight=139&originWidth=797&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=43319&status=done&style=none&taskId=ud798b7b4-0b33-4c4e-a53b-6b8f7fb7ef7&title=&width=637.6)

(2)配置nacos的conf中application.properties文件
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691116433212-9b89177b-bc8f-40d0-86a9-2056237822e3.png#averageHue=%23ebeaea&clientId=u8b9ee88c-b210-4&from=paste&height=424&id=u8f84cc03&originHeight=530&originWidth=1318&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=293998&status=done&style=none&taskId=u86f59b5c-481e-4023-9d33-7ae1f63d3d0&title=&width=1054.4)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691116347132-f0e5b6da-d75e-486b-90fd-d4f52f0f8780.png#averageHue=%23f8f8f8&clientId=u8b9ee88c-b210-4&from=paste&height=206&id=ubbe46f07&originHeight=258&originWidth=936&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=157045&status=done&style=none&taskId=u3ec7fd5b-eee6-4edd-9e1f-b4ebc9a9709&title=&width=748.8)
application.properties服务端口配置：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691116580961-b292ecc4-5527-4c69-b278-93ba6643e0be.png#averageHue=%23fbfbfb&clientId=u8b9ee88c-b210-4&from=paste&height=42&id=ubc4bcc82&originHeight=52&originWidth=505&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=14349&status=done&style=none&taskId=u9a05af75-5623-406e-bb13-b702b65880f&title=&width=404)
Nginx配置
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691116757154-a066fc1f-f4fa-481e-937b-a207309f1261.png#averageHue=%2388918e&clientId=u8b9ee88c-b210-4&from=paste&height=474&id=u188f2bee&originHeight=593&originWidth=1188&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=203840&status=done&style=none&taskId=u6b86266c-dec4-4d8e-a574-660e8c43d0c&title=&width=950.4)
将上图信息配置到http中
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691116786478-e0d5c0e0-5ebf-45c2-9e95-ace725a3a33b.png#averageHue=%23fafafa&clientId=u8b9ee88c-b210-4&from=paste&height=426&id=ud1627fa8&originHeight=533&originWidth=897&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=189377&status=done&style=none&taskId=u181f14fc-5e40-4005-a921-af4482a6fb1&title=&width=717.6)


HttpFeign
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688555672718-946f8474-f6d4-4be4-b113-7eaded4da4c2.png#averageHue=%23f6f5f5&clientId=uee2e8f91-4f06-4&from=paste&height=490&id=uf837d354&originHeight=612&originWidth=1242&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=139620&status=done&style=none&taskId=u7ed8a116-ef14-432b-9479-3c49b0d47fb&title=&width=993.6)
Feign的搭建配置
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688555696075-49bb4973-c3b5-4b05-a275-f9b8e49af5aa.png#averageHue=%23ededec&clientId=uee2e8f91-4f06-4&from=paste&height=612&id=u057bf047&originHeight=765&originWidth=1376&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=311171&status=done&style=none&taskId=uf8c72c8d-535c-4391-b0a2-4c457a7b4eb&title=&width=1100.8)
Feign的其他属性配置-----配置文件配置
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688626245249-aad730db-5144-42a0-a72e-347c5d0f855f.png#averageHue=%23dbdfd6&clientId=u59c805dc-8421-4&from=paste&height=629&id=u06d781da&originHeight=786&originWidth=1236&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=192745&status=done&style=none&taskId=u57694f3e-8b7a-4956-97c6-18995d36988&title=&width=988.8)
Feign的其他属性配置-----代码形式配置
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688626459746-5196ed4a-e671-4f0e-ba6d-0e0cafaa767d.png#averageHue=%23efefef&clientId=u59c805dc-8421-4&from=paste&height=486&id=ueed04aa3&originHeight=608&originWidth=1393&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=219571&status=done&style=none&taskId=u17467f16-6792-4a11-baa4-97219c7eee3&title=&width=1114.4)
Feign的性能调优（默认为URLConnection，jdk自带,不支持连接池）
调优一------配置Apache HttpClient
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691117973342-73f6791e-0a1e-4299-a91e-4d9a7fee3942.png#averageHue=%23dbe0d6&clientId=u8b9ee88c-b210-4&from=paste&height=472&id=uacc68a43&originHeight=590&originWidth=978&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=183764&status=done&style=none&taskId=u14df1108-7c25-43a6-aa23-acad1c9abee&title=&width=782.4)
调优二------配置OkHttp
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688627526290-7baf4796-bbbf-4830-850b-add416c616dd.png#averageHue=%23f1f1f1&clientId=u59c805dc-8421-4&from=paste&height=258&id=ue71a6687&originHeight=322&originWidth=731&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=69790&status=done&style=none&taskId=ubc7daa27-6655-44fb-8ab0-33db63f07e7&title=&width=584.8)
实践中feign的代码简化方法：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691118628531-e4bfb7ed-234c-4d67-9df4-5b9fc45e0f5c.png#averageHue=%23f2f0f0&clientId=u8b9ee88c-b210-4&from=paste&height=272&id=u6cb3eb9b&originHeight=340&originWidth=1187&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=130108&status=done&style=none&taskId=ufb460760-88bf-44b2-906f-9bc02124d88&title=&width=949.6)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691119284134-46638527-0db1-4ee0-bcf5-6f637e967dad.png#averageHue=%23f6f6f5&clientId=u8b9ee88c-b210-4&from=paste&height=338&id=u00589075&originHeight=423&originWidth=1321&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=161434&status=done&style=none&taskId=u519a6380-e23d-4b13-b0a3-0d7fe178415&title=&width=1056.8)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691119087520-3fd8076e-071e-43aa-8127-0b6c702993cb.png#averageHue=%23f6f6f6&clientId=u8b9ee88c-b210-4&from=paste&height=334&id=u4053b30a&originHeight=418&originWidth=910&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=85688&status=done&style=none&taskId=uf79535e2-a9c2-4588-b300-4a918396c5b&title=&width=728)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691119113134-b65a4cce-6e55-4b38-9947-42044b544412.png#averageHue=%23e2e7da&clientId=u8b9ee88c-b210-4&from=paste&height=139&id=ud1ae569c&originHeight=174&originWidth=866&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=139276&status=done&style=none&taskId=u1197aa59-822d-428b-9a9b-b3b0723904b&title=&width=692.8)


统一网关Gateway
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688634051722-f66c02f5-cd42-400f-b5e7-5621ffaf087f.png#averageHue=%23f5f1f1&clientId=u59c805dc-8421-4&from=paste&height=502&id=u2214482d&originHeight=627&originWidth=1369&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=227153&status=done&style=none&taskId=u75a22629-9ace-4456-a99a-71c282317fb&title=&width=1095.2)
网关的搭建
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688634372580-65fe71ce-4abd-4848-967a-aa15e91eff7c.png#averageHue=%23edf4e8&clientId=u59c805dc-8421-4&from=paste&height=510&id=u55878028&originHeight=637&originWidth=1333&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=269789&status=done&style=none&taskId=u133ce4f3-b20b-4c1f-9e95-c48b873f0fa&title=&width=1066.4)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688634589622-1e492ad6-afa4-4a8f-8b17-c7b52c9e10c0.png#averageHue=%23fafafa&clientId=u59c805dc-8421-4&from=paste&height=518&id=ubea4b49b&originHeight=648&originWidth=1404&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=231760&status=done&style=none&taskId=u8a6bdcaa-93f9-4348-bdaf-a9c833ad1db&title=&width=1123.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691137178794-239f7f68-3f95-420d-8ba6-bc74e84a75be.png#averageHue=%23f8f1f1&clientId=u8b9ee88c-b210-4&from=paste&height=538&id=u26674533&originHeight=672&originWidth=1266&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=230993&status=done&style=none&taskId=u0d96bc96-526f-4871-a9b4-58a02cd5615&title=&width=1012.8)
网关路由的断言
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688635496942-0164f8e8-6983-49d3-9b09-26e953a13c24.png#averageHue=%23d5cfce&clientId=u59c805dc-8421-4&from=paste&height=560&id=u8c299311&originHeight=700&originWidth=1358&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=413739&status=done&style=none&taskId=u40bff153-abd6-4a32-87f5-1582d7ec912&title=&width=1086.4)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688635472222-8123ac90-92d9-4c29-87e3-e7a792334804.png#averageHue=%23e6ebe2&clientId=u59c805dc-8421-4&from=paste&height=295&id=u6a8b6c83&originHeight=369&originWidth=938&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=214145&status=done&style=none&taskId=u953d5e88-0b73-448a-8d10-4be9ac89f7c&title=&width=750.4)
路由过滤器
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688635560933-43496c3d-00f2-4353-ab64-8a774718cd2e.png#averageHue=%23d7c9c7&clientId=u59c805dc-8421-4&from=paste&height=451&id=u8178bd66&originHeight=564&originWidth=1371&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=181777&status=done&style=none&taskId=u92b1bd48-cd15-49bb-8a95-058f0931000&title=&width=1096.8)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688635591339-a4bf7840-d428-4827-846a-757e3c629632.png#averageHue=%23eaf0e6&clientId=u59c805dc-8421-4&from=paste&height=294&id=u3c6d1fee&originHeight=368&originWidth=1020&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=216223&status=done&style=none&taskId=ud6d8d969-f229-4185-8ad0-0a8c778d05a&title=&width=816)
路由过滤器
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688635693012-5a1f1ec1-2f33-45bb-89a0-fb2f7d4d660a.png#averageHue=%23ecf4e8&clientId=u59c805dc-8421-4&from=paste&height=551&id=u23a595ad&originHeight=689&originWidth=1217&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=285154&status=done&style=none&taskId=u9ad9a82e-9b32-4ed5-9e3f-20ac73d67fc&title=&width=973.6)
对各个路由有作用的路由过滤器
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688635747958-0b30bc16-760e-4b80-a379-53faec99df7c.png#averageHue=%23eeeeee&clientId=u59c805dc-8421-4&from=paste&height=253&id=u87723915&originHeight=316&originWidth=703&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=99856&status=done&style=none&taskId=u612276f8-0ad6-4472-baa5-30bbb3bacf4&title=&width=562.4)
全局过滤器---自定义拦截过滤逻辑Global
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688636132138-9c4f7f70-36b0-4abb-a23a-9f2b539f025a.png#averageHue=%23eaf1e5&clientId=u59c805dc-8421-4&from=paste&height=600&id=u52a39927&originHeight=750&originWidth=1420&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=442942&status=done&style=none&taskId=uefca622c-1ac0-460f-b42a-593ae66d549&title=&width=1136)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691139191998-40aef1a6-da30-4f4b-a05b-6123d7e9173d.png#averageHue=%23ededed&clientId=u8b9ee88c-b210-4&from=paste&height=247&id=ud0aa16ee&originHeight=309&originWidth=695&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=80744&status=done&style=none&taskId=u2f666160-ea38-4340-8d51-0ff38212b7a&title=&width=556)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688639981874-8f9bb5d0-b1b1-4aa3-8756-47078a406012.png#averageHue=%23efefef&clientId=u59c805dc-8421-4&from=paste&height=210&id=u7c0c6ea3&originHeight=262&originWidth=814&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=88323&status=done&style=none&taskId=u835c43ba-99bd-4796-9b13-48c6e7c493b&title=&width=651.2)
Docker
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688693988981-9d380bfa-41ff-47e0-9719-49d4c1c4db66.png#averageHue=%23d9d8d6&clientId=u59c805dc-8421-4&from=paste&height=398&id=uc286ec2b&originHeight=498&originWidth=1030&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=241158&status=done&style=none&taskId=uef5c9f5a-0086-4fcd-ace0-8ad9e793cdc&title=&width=824)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688694021408-02dcb5ef-c413-4f20-b399-73411954522b.png#averageHue=%23f1f1f1&clientId=u59c805dc-8421-4&from=paste&height=351&id=ua84c6501&originHeight=439&originWidth=854&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=128102&status=done&style=none&taskId=u70ee48d8-8b10-417d-9230-d6625026e36&title=&width=683.2)
Docker 要在虚拟机root权限下systemctl start docker 启动才能使用：

Docker的结构和拉取启动镜像为容器(镜像就像一个压缩包在docker中，经过docker run创建为容器，就像压缩包安装了一样，docker start 容器名，开启使用)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688694937840-40f02341-e15d-496c-b641-92f5cae703f3.png#averageHue=%23f4f4f4&clientId=u59c805dc-8421-4&from=paste&height=478&id=u0a7aba5b&originHeight=597&originWidth=917&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=159693&status=done&style=none&taskId=ufadde41f-f7bb-4046-842b-1b5240ee3ee&title=&width=733.6)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688695792952-2f2512ef-49a1-45f1-9668-4c070303f3b3.png#averageHue=%23f7f6f3&clientId=u59c805dc-8421-4&from=paste&height=546&id=u3c21a04d&originHeight=682&originWidth=1372&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=272810&status=done&style=none&taskId=u883d8c48-506b-430c-a7f6-a1613cda3ec&title=&width=1097.6)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688697130688-9b202e83-8e11-4d39-be51-4b3f024967ab.png#averageHue=%2314344b&clientId=u59c805dc-8421-4&from=paste&height=73&id=uca507583&originHeight=91&originWidth=549&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=54609&status=done&style=none&taskId=ud3b7ded7-e1c4-4241-81d5-3078affa14d&title=&width=439.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688697175033-3bb5b331-119f-4ffc-9821-8ea561324df0.png#averageHue=%2311344e&clientId=u59c805dc-8421-4&from=paste&height=173&id=uf23e0bd7&originHeight=216&originWidth=719&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=149112&status=done&style=none&taskId=ufa615f8d-cab8-4c25-9788-9d526dc6331&title=&width=575.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688697210896-afdcfb2a-35ba-4505-8997-f88d25ffb625.png#averageHue=%2312344e&clientId=u59c805dc-8421-4&from=paste&height=85&id=ub88dc4cd&originHeight=106&originWidth=856&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=84796&status=done&style=none&taskId=ua0048dcb-c832-49e1-b4f5-fd43f090351&title=&width=684.8)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688697226376-c18890d1-6ed5-4d36-b1d5-0d251e9d0e6a.png#averageHue=%23153750&clientId=u59c805dc-8421-4&from=paste&height=44&id=u2d73d465&originHeight=55&originWidth=569&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=35582&status=done&style=none&taskId=udafe3692-7456-442f-938f-0cd5cff7850&title=&width=455.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688697262694-36ba3c3b-8c1d-4328-b0fd-6b460e7d2f1b.png#averageHue=%2313354e&clientId=u59c805dc-8421-4&from=paste&height=27&id=u993cfefb&originHeight=34&originWidth=649&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=24185&status=done&style=none&taskId=u281cfba2-292b-4656-9750-7dc0af18078&title=&width=519.2)
容器常见的命令
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688697434145-842adfbd-5e97-4679-8e36-b7b5311f78c3.png#averageHue=%23bc915b&clientId=u59c805dc-8421-4&from=paste&height=530&id=uc65ceeba&originHeight=663&originWidth=1277&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=213888&status=done&style=none&taskId=u66df4dfd-a584-481b-981b-4fb7dc2fd88&title=&width=1021.6)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688697669035-b46596e4-99ed-4332-bb10-b12c644926a1.png#averageHue=%23e6e5e4&clientId=u59c805dc-8421-4&from=paste&height=531&id=ufffd4b4c&originHeight=664&originWidth=1162&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=285684&status=done&style=none&taskId=u01c14fad-9435-4992-86de-9efa1ad73b3&title=&width=929.6)

数据卷
1.数据卷的作用：将容器的目录文件与宿主目录建立动态双向绑定----简称“挂载”，方便配置容器的文件信息
2.暂未和容器映射的数据卷（数据卷的位置不知，inspect查看）创建命令：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688718761792-d59ddd38-d7f2-411b-850c-aa7c2d80302a.png#averageHue=%23f0f0f0&clientId=u59c805dc-8421-4&from=paste&height=475&id=u1151080d&originHeight=594&originWidth=1362&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=184980&status=done&style=none&taskId=u7b0cf32f-e7c3-401e-be23-94d816d32f3&title=&width=1089.6)

数据卷与容器建立映射挂载：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691323149422-3f326c0f-4011-400b-845d-abc09619ac96.png#averageHue=%230b2d46&clientId=u20b20d1c-3394-4&from=paste&height=132&id=u011f890f&originHeight=165&originWidth=892&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=82213&status=done&style=none&taskId=u37d75f1d-bc70-4dd2-8b2a-5152ae97c75&title=&width=713.6)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691323356776-dc704e94-1b18-440f-b96c-3254a24bd2ad.png#averageHue=%23ebe9e8&clientId=u20b20d1c-3394-4&from=paste&height=546&id=u487bebb8&originHeight=682&originWidth=1377&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=446450&status=done&style=none&taskId=ubfb01b14-2b5f-4492-a305-c6bd8a10fb1&title=&width=1101.6)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691323378773-8b20580b-bbb3-4edf-8ec5-34f966934cca.png#averageHue=%23f4f4f4&clientId=u20b20d1c-3394-4&from=paste&height=184&id=u7cc9e802&originHeight=230&originWidth=784&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=46431&status=done&style=none&taskId=u8b66b529-265d-4d38-965a-5b37ac5f98c&title=&width=627.2)
3.宿主机目录文件直接挂载到容器的方式：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691323487823-f28d1da4-7d1e-4127-b7a7-86866cafead5.png#averageHue=%23f7f1f1&clientId=u20b20d1c-3394-4&from=paste&height=250&id=ua78c3831&originHeight=312&originWidth=1112&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=181560&status=done&style=none&taskId=u541ea79a-75f9-4297-af9a-6f1ad8ad185&title=&width=889.6)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691322231448-b7737250-4ecd-420f-a28c-300c0271fa62.png#averageHue=%23f4e2d2&clientId=u20b20d1c-3394-4&from=paste&height=533&id=mBJrr&originHeight=666&originWidth=1373&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=386551&status=done&style=none&taskId=u45a888ee-40dd-45b2-8cf2-f5d48df2b8e&title=&width=1098.4)

![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688718883103-f5ba3d71-50be-4919-9523-e1dbe09c146a.png#averageHue=%23f8f8f8&clientId=u59c805dc-8421-4&from=paste&height=426&id=u9fd7984f&originHeight=532&originWidth=931&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=103294&status=done&style=none&taskId=u9c9a388d-1caf-41e1-8262-1b485d99240&title=&width=744.8)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691327464809-c7f47745-1293-477a-9119-995d5b66a182.png#averageHue=%23d8d8d8&clientId=u20b20d1c-3394-4&from=paste&height=498&id=u3d32a647&originHeight=622&originWidth=1416&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=206740&status=done&style=none&taskId=ue4fb72e6-54dc-4914-baf3-8af75c703dc&title=&width=1132.8)


自定义镜像-----将自己的项目打包成镜像形成容器部署使用
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691410749612-ca1aae2d-cc73-4fa6-9828-460b42923566.png#averageHue=%23f7f5f5&clientId=u34fd4e78-b375-4&from=paste&height=482&id=uadd0f76f&originHeight=603&originWidth=1368&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=197742&status=done&style=none&taskId=u00970510-858a-43f6-8e59-42b54727994&title=&width=1094.4)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691410936279-51c8bd21-e0ae-4f6e-aa47-dc25636a204d.png#averageHue=%23ddd0d0&clientId=u34fd4e78-b375-4&from=paste&height=579&id=u74c9d556&originHeight=724&originWidth=1357&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=392253&status=done&style=none&taskId=ud10387ef-e4d2-4524-868c-3955c6d82f6&title=&width=1085.6)


首先，上传打包好的项目包和需要的jdk环境，和dockerfile文件（里面是环境安装路径和暴露的端口等）
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691411741062-262a5838-0927-47b4-972c-221e2b46234e.png#averageHue=%23f2f2ef&clientId=u34fd4e78-b375-4&from=paste&height=513&id=u7c939522&originHeight=641&originWidth=634&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=291832&status=done&style=none&taskId=ue9f36489-1791-4348-bf10-6dbab1be7d9&title=&width=507.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691411360137-88db66f5-8b0c-4b8e-b252-e36e142b4442.png#averageHue=%2312334c&clientId=u34fd4e78-b375-4&from=paste&height=439&id=udad37551&originHeight=549&originWidth=1032&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=387962&status=done&style=none&taskId=ua4fac3ed-2035-4173-a19f-f566c5f5c63&title=&width=825.6)
再用docker build -t imageName:version .命令构建镜像

dockerfile文件基础镜像优化：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691415083570-bd052e26-f541-486b-9bd1-bd81e0f37a8c.png#averageHue=%23f4f4f4&clientId=u34fd4e78-b375-4&from=paste&height=231&id=u684235d4&originHeight=289&originWidth=513&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=100842&status=done&style=none&taskId=ub31f21d3-1b7e-4f42-9327-0dac8209b5c&title=&width=410.4)
总结：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691415165589-1fd7e65e-ba7f-45a4-866b-feadf68540f1.png#averageHue=%23f4f4f4&clientId=u34fd4e78-b375-4&from=paste&height=444&id=ua756916c&originHeight=555&originWidth=809&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=99823&status=done&style=none&taskId=ue043411e-2b74-42d7-abdc-043edf8bd42&title=&width=647.2)
 ![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688804207013-0eaedb44-f99f-4e27-ae97-8e745e0064be.png#averageHue=%23e4e3d9&clientId=uc091fae2-2dbc-4&from=paste&height=526&id=uc79dd37e&originHeight=657&originWidth=1380&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=354929&status=done&style=none&taskId=u1daee44a-0ed4-4a6f-a9a7-929c6dca702&title=&width=1104)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691415531401-364a1b51-833a-45b2-8411-73de7b1d1e36.png#averageHue=%23f2f2f2&clientId=u34fd4e78-b375-4&from=paste&height=485&id=ue58985b0&originHeight=606&originWidth=1234&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=211643&status=done&style=none&taskId=udf507d18-561e-4704-b9cc-f1b3370cf38&title=&width=987.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691415576299-11d63fe0-d31c-4c44-8152-62a246927fb2.png#averageHue=%23f8f8f8&clientId=u34fd4e78-b375-4&from=paste&height=227&id=u9bc67f4a&originHeight=284&originWidth=944&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=85977&status=done&style=none&taskId=u5a97fd98-533a-4ecb-bc23-0003dee1c2d&title=&width=755.2)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691415592944-7fd7bd64-42fa-4b9a-bd90-587bf02e43f7.png#averageHue=%23f5f5f5&clientId=u34fd4e78-b375-4&from=paste&height=354&id=u8ec37ba5&originHeight=443&originWidth=1168&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=187369&status=done&style=none&taskId=u83169e89-0062-40cb-b267-09935600c17&title=&width=934.4)
集群部署：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691415798136-4b1efaf4-be7d-46cf-a57c-28345ca46758.png#averageHue=%23f3f3f3&clientId=u34fd4e78-b375-4&from=paste&height=452&id=u5fd66bf9&originHeight=565&originWidth=1224&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=273159&status=done&style=none&taskId=u3928ecc2-d9e5-4092-a921-086f15bc840&title=&width=979.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691415970418-651e4dfc-12ed-4400-ac74-3f16fd0a7e5a.png#averageHue=%23eeeded&clientId=u34fd4e78-b375-4&from=paste&height=589&id=u5fad6dd3&originHeight=736&originWidth=1309&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=371789&status=done&style=none&taskId=u98eba149-ab6f-454d-9838-0edf3194549&title=&width=1047.2)
MQ
1.概念
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688808984155-3b02066e-1625-42d5-a404-405dfba4b7d2.png#averageHue=%23f5f5f5&clientId=uc091fae2-2dbc-4&from=paste&height=375&id=u63e2747e&originHeight=469&originWidth=659&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=85318&status=done&style=none&taskId=u66950886-f601-4b3d-8d0b-0977e84457e&title=&width=527.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688810492598-75d24d7b-4226-4782-94a3-25928185527c.png#averageHue=%23faf6f4&clientId=uc091fae2-2dbc-4&from=paste&height=536&id=u9c07e045&originHeight=670&originWidth=1242&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=204392&status=done&style=none&taskId=u3468a3c8-ef3f-4487-9464-5f5319168d5&title=&width=993.6)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688810446711-5dbb247d-8f78-402c-90f9-cfabd18d06a6.png#averageHue=%23f5f5f5&clientId=uc091fae2-2dbc-4&from=paste&height=388&id=ua8f89caa&originHeight=485&originWidth=713&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=92597&status=done&style=none&taskId=u5718eb82-1bfd-42d1-9d8a-aba22d0b716&title=&width=570.4)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1688810706440-fdd7c5db-8a68-4fbe-8f8e-a2a6be5178aa.png#averageHue=%23e8dfdf&clientId=uc091fae2-2dbc-4&from=paste&height=526&id=u5a56f57f&originHeight=658&originWidth=1395&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=213727&status=done&style=none&taskId=u026d1e6d-2f16-4786-8c63-04332e80dcb&title=&width=1116)
在虚拟机中部署rabbitMQ方法：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690788695925-5dd229ba-871c-4538-94c3-efe7f393161b.png#averageHue=%23f4f4f4&clientId=uc246b4d9-08fd-4&from=paste&height=116&id=ub630a5e1&originHeight=145&originWidth=575&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=21881&status=done&style=none&taskId=u5b6a05f5-bdcd-42ae-8e9e-286d5e84bfd&title=&width=460)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690788727431-36bb9d0b-9eda-422d-82ed-3bbad541e543.png#averageHue=%23f4f4f4&clientId=uc246b4d9-08fd-4&from=paste&height=326&id=u98e591b4&originHeight=408&originWidth=610&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=99898&status=done&style=none&taskId=u7555b467-883f-4f05-bcc5-d1e9b101877&title=&width=488)
mq.tar包从本地上传至虚拟机中的指定目录后，cd到该目录下用命令load部署

MQ发布订阅原始实现步骤
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690789410446-b2e819cb-4d0f-418b-bce4-1cec614cdf3a.png#averageHue=%23efefef&clientId=uc246b4d9-08fd-4&from=paste&height=503&id=uc59cfc79&originHeight=629&originWidth=686&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=126361&status=done&style=none&taskId=u1f106e22-97e0-4807-9700-4de5a2fbede&title=&width=548.8)
MQ发布订阅封装依赖升级版实现步骤------AMQP(SpringAMQP)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690789569720-bdc6d555-7e15-4ab9-850c-d0b18b845b33.png#averageHue=%23f1efef&clientId=uc246b4d9-08fd-4&from=paste&height=282&id=u2663bb06&originHeight=352&originWidth=1087&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=173743&status=done&style=none&taskId=u210a3980-0e07-4e1c-b91c-66b104a4d8e&title=&width=869.6)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690789596670-7f03d0ab-f437-4442-ada7-834c6d857f07.png#averageHue=%23edf0e5&clientId=uc246b4d9-08fd-4&from=paste&height=191&id=u8c5a5b5b&originHeight=239&originWidth=1100&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=146173&status=done&style=none&taskId=ucbbbbdf5-0765-4955-9f50-54142fc723a&title=&width=880)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690789627172-73ee2e84-9474-4eba-a3b3-063fdfbd7ab3.png#averageHue=%23eef1e5&clientId=uc246b4d9-08fd-4&from=paste&height=531&id=u8f0a48a4&originHeight=664&originWidth=1175&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=456197&status=done&style=none&taskId=u43221da0-bff8-454f-87bd-3660fe61914&title=&width=940)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690789883939-d1ddcb33-59a5-4af8-a101-4805bb68b201.png#averageHue=%23eff1e6&clientId=uc246b4d9-08fd-4&from=paste&height=534&id=ua89f492d&originHeight=667&originWidth=1339&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=418795&status=done&style=none&taskId=u31f1033c-6296-4f09-98b7-cc55980d19f&title=&width=1071.2)
工作队列---消费者多个
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690790114671-e818f391-ef31-49cb-bed8-8a7c2cc68ac3.png#averageHue=%23e7e6e6&clientId=uc246b4d9-08fd-4&from=paste&height=310&id=ud8424314&originHeight=388&originWidth=1202&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=197839&status=done&style=none&taskId=uce173b45-6ffe-4f11-9424-308c0b04117&title=&width=961.6)
设置预取数量----处理完再去取队列里的消息，不抢占
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690790336592-a2789dd7-dd28-4477-b1c3-fdebac4989f5.png#averageHue=%23f0f2eb&clientId=uc246b4d9-08fd-4&from=paste&height=532&id=u75b8ed81&originHeight=665&originWidth=1338&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=195627&status=done&style=none&taskId=uba8d627c-b0b9-44e4-818d-910c2ca1ff3&title=&width=1070.4)
有交换机的消息队列机制--广播（FanoutExchange）
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690791006813-91948009-63f0-42a1-885c-c8b3b887977b.png#averageHue=%23f7f4f4&clientId=uc246b4d9-08fd-4&from=paste&height=422&id=u1d562791&originHeight=528&originWidth=1267&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=331301&status=done&style=none&taskId=u42df4887-cfbe-420a-85ad-3c443216e3a&title=&width=1013.6)
交换机与队列绑定声明
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690791798637-1e14e407-cfe6-4fd4-a933-7e7697b11176.png#averageHue=%23edf0e4&clientId=uc246b4d9-08fd-4&from=paste&height=531&id=u1e45b557&originHeight=664&originWidth=1236&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=470077&status=done&style=none&taskId=u7ea73133-8cd7-4e25-ba6b-5b6f1a64c5c&title=&width=988.8)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690791880333-43d06d56-faba-4fd4-9888-3bcef52156e0.png#averageHue=%23eff2e6&clientId=uc246b4d9-08fd-4&from=paste&height=442&id=uddb08684&originHeight=552&originWidth=1191&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=339498&status=done&style=none&taskId=u558748e1-5f9e-466e-9065-743b31267ec&title=&width=952.8)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690791906307-1a3b86a9-6e72-49fe-a57a-cd8fde52d08f.png#averageHue=%23f0f3e7&clientId=uc246b4d9-08fd-4&from=paste&height=476&id=u4696420b&originHeight=595&originWidth=1207&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=327370&status=done&style=none&taskId=uaeff1432-2223-46d5-8f96-f130af7271f&title=&width=965.6)
有交换机的消息队列机制----路由（DirectExchange)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690792130579-f75bf7a5-136f-4447-b244-c1b037c25fa7.png#averageHue=%23f8f5f5&clientId=uc246b4d9-08fd-4&from=paste&height=506&id=u6b271d5d&originHeight=632&originWidth=1191&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=341553&status=done&style=none&taskId=ufd44ab7b-c1fc-4bec-8e49-2476be61a23&title=&width=952.8)
@RabbitListener(bindings=@QueueBinding( value=@Queue(),  exchange=@Exchange(),  key={} )  )
@Queue(name="")
@Exchange(name="",type="")
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690792340332-7121a6a8-05be-4f92-8ae6-41135efbcd14.png#averageHue=%23e6ebdf&clientId=uc246b4d9-08fd-4&from=paste&height=220&id=u0c4d0753&originHeight=275&originWidth=1112&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=253198&status=done&style=none&taskId=u0038323b-f037-4131-bd40-c1db3d3c015&title=&width=889.6)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690792515956-26147c1d-c9b4-4033-90e2-019b5f360bb6.png#averageHue=%23efeded&clientId=uc246b4d9-08fd-4&from=paste&height=303&id=u5c7d2429&originHeight=379&originWidth=1274&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=175180&status=done&style=none&taskId=uf0e635f4-99df-458b-814d-42916001c65&title=&width=1019.2)
有交换机的消息队列机制--主题（TopicExchange）
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690793157854-2403366d-fc1c-487e-af1f-1eb2de194a21.png#averageHue=%23f3f2f0&clientId=uc246b4d9-08fd-4&from=paste&height=472&id=udc4c4d66&originHeight=590&originWidth=1152&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=335592&status=done&style=none&taskId=ufa0c1e56-cf55-419d-8573-1ea3ab2f5dd&title=&width=921.6)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690793304855-0babca24-b20b-456f-afea-c962a4ab1c81.png#averageHue=%23edefdf&clientId=uc246b4d9-08fd-4&from=paste&height=540&id=u734be543&originHeight=675&originWidth=1239&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=561164&status=done&style=none&taskId=ue39cf119-a277-4bfa-b886-502dd419ae9&title=&width=991.2)



分布式搜索------elasticsearch（强大的搜索引擎）
一、es客户端操作索引和文档
kibana客户端操作DSL语句，发送请求给es,ik分词器放入es的插件目录中，可选ik_smart和ik_max_word分词算法
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690795141852-c7aac031-92a7-4ad4-8556-8cdf348bba64.png#averageHue=%23dcdcda&clientId=uc246b4d9-08fd-4&from=paste&height=509&id=u1fd5db20&originHeight=636&originWidth=1362&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=260180&status=done&style=none&taskId=ua9b2a71a-102e-4d98-b407-a1ceaf9b806&title=&width=1089.6)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691994135344-c2163539-5507-45b8-8813-8804e580c5a8.png#averageHue=%23e7e6df&clientId=u9da8e819-9f02-4&from=paste&height=368&id=u4925155c&originHeight=460&originWidth=1275&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=342918&status=done&style=none&taskId=u73ee22e0-5aad-4105-bf2e-5ad0407f059&title=&width=1020)
在ext_dict中输入分词内容，方便es在分词的时候识别按此内容进行分词；在exc_stopwords中输入不出现在分词
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691994464062-51c43251-c41c-4443-bdc3-bd6eec3dec58.png#averageHue=%23f5f5f5&clientId=u9da8e819-9f02-4&from=paste&height=486&id=ufee19d8c&originHeight=608&originWidth=889&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=121512&status=done&style=none&taskId=ud0d1a588-b387-4147-b6a0-869ac20e589&title=&width=711.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691482015216-23371fbc-a355-447d-b53b-5fe800e85a7b.png#averageHue=%23f7f7f7&clientId=u58227ba4-6202-4&from=paste&height=467&id=ud5f67f56&originHeight=584&originWidth=838&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=96592&status=done&style=none&taskId=u008a853f-c216-44c3-b258-fc8f9cbbb45&title=&width=670.4)
1.索引操作
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691996097739-823c21cd-572b-44d0-a1b5-cf43efade590.png#averageHue=%23f1f1f1&clientId=u9da8e819-9f02-4&from=paste&height=324&id=u0cf0c3ac&originHeight=405&originWidth=780&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=98823&status=done&style=none&taskId=u9b9ad678-134e-4bf9-80d5-d9dfa2ea6bb&title=&width=624)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691995729501-2281ee0e-6d7e-4b94-b4e7-935d70ac8c91.png#averageHue=%23e7e6e0&clientId=u9da8e819-9f02-4&from=paste&height=563&id=uce215149&originHeight=704&originWidth=1382&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=415477&status=done&style=none&taskId=uc8ae1e15-aae4-41d2-b877-9438934086b&title=&width=1105.6)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691482537394-1ba77ace-0873-46d9-8bc8-6ecff23ac9c9.png#averageHue=%23ededed&clientId=u58227ba4-6202-4&from=paste&height=340&id=u29a208ad&originHeight=425&originWidth=959&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=103763&status=done&style=none&taskId=ub2778835-1067-4f94-ab46-abfb5a8a3da&title=&width=767.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691482585253-798a52f2-1847-4275-8c50-c5caadda2cfc.png#averageHue=%23f4f3f3&clientId=u58227ba4-6202-4&from=paste&height=495&id=u5d165762&originHeight=619&originWidth=1032&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=98244&status=done&style=none&taskId=u4b7d8b85-26bf-4155-bc6f-861795fcf6e&title=&width=825.6)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691482427616-091493ef-d568-4ce5-a18d-89be83e9111b.png#averageHue=%23eceff4&clientId=u58227ba4-6202-4&from=paste&height=532&id=uffd40f6c&originHeight=665&originWidth=1552&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=390638&status=done&style=none&taskId=u6ea7513b-6f31-4b66-8e2a-890510d9e51&title=&width=1241.6)

2.文档操作
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691482798399-5ee5e0d2-999e-4eaa-89a2-5a638a4eff60.png#averageHue=%23f2f4f8&clientId=u58227ba4-6202-4&from=paste&height=416&id=u10e5d053&originHeight=520&originWidth=1300&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=274014&status=done&style=none&taskId=u6ca345c4-79ca-4fdc-aca9-927f4e9e646&title=&width=1040)
注意局部修改的写法：“doc”:{"key":value}
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691482930715-5efb4a65-b1c8-4cd2-ae71-714a8f8a95fb.png#averageHue=%23eaf0f6&clientId=u58227ba4-6202-4&from=paste&height=398&id=u1141e335&originHeight=497&originWidth=1413&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=301538&status=done&style=none&taskId=u6ebb0eb7-2336-441f-b345-49dc297f7de&title=&width=1130.4)
二、java代码配置操作索引和文档
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691996411940-570043d4-9ce6-4eba-ad64-3ae3a81fa73e.png#averageHue=%23edf2e8&clientId=u9da8e819-9f02-4&from=paste&height=569&id=u2459b779&originHeight=711&originWidth=1361&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=874454&status=done&style=none&taskId=u4f6b93d2-675e-4466-bcf8-d7c9f94fbb9&title=&width=1088.8)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690869697151-f7227d3b-1acd-46b3-83dc-d293eb1e48b3.png#averageHue=%23edf1ea&clientId=u16ef33c5-5b8d-4&from=paste&height=527&id=ub1becb34&originHeight=659&originWidth=1084&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=391740&status=done&style=none&taskId=ue13e9a64-ae8e-427a-ba4d-cc46fae813a&title=&width=867.2)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690869991885-991aca71-1531-4960-a7a8-7104ff352968.png#averageHue=%23eaf0e6&clientId=u16ef33c5-5b8d-4&from=paste&height=541&id=ua6c36e7a&originHeight=676&originWidth=1496&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=579170&status=done&style=none&taskId=u397ac5f5-d3a8-44fe-a675-d3c849fa3a6&title=&width=1196.8)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691996658446-f2c74f71-a2ad-44d2-89e9-5562b22f5cce.png#averageHue=%23eff5ec&clientId=u9da8e819-9f02-4&from=paste&height=406&id=u2173ae24&originHeight=507&originWidth=822&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=276012&status=done&style=none&taskId=udbf03a88-820d-4c5a-919b-4ec24e392ac&title=&width=657.6)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690870107042-ca3d15a1-44ad-4265-a55e-b67e4c78a3a7.png#averageHue=%23e6ebe3&clientId=u16ef33c5-5b8d-4&from=paste&height=553&id=u86f9b10b&originHeight=691&originWidth=1402&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=542711&status=done&style=none&taskId=u23d72189-2715-489b-ac9e-d05992808e6&title=&width=1121.6)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690870296307-590d562a-c661-44c0-bbf7-f09feb1b8cb8.png#averageHue=%23eaefe7&clientId=u16ef33c5-5b8d-4&from=paste&height=526&id=ue8d3c244&originHeight=657&originWidth=1007&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=352026&status=done&style=none&taskId=uc5eed762-145b-4318-85a0-37e1345d110&title=&width=805.6)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690872506840-10a453f7-263a-4e41-93c0-d6384344a74e.png#averageHue=%23e8e9e2&clientId=u16ef33c5-5b8d-4&from=paste&height=526&id=uca8fcb14&originHeight=657&originWidth=1526&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=422614&status=done&style=none&taskId=uc1745fce-b99a-4752-982d-0327ca4f5de&title=&width=1220.8)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690873455416-98fb364f-4661-4793-8259-994ac721da44.png#averageHue=%23ecf0e8&clientId=u16ef33c5-5b8d-4&from=paste&height=553&id=u599c6bc1&originHeight=691&originWidth=1493&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=421315&status=done&style=none&taskId=u8868bbb8-ba3d-4396-adc2-9a4bae87c55&title=&width=1194.4)注意修改的写法。request.doc{"key":"value"}
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690873482682-c6e02aad-5894-4ba4-9702-425236749012.png#averageHue=%23dddcd5&clientId=u16ef33c5-5b8d-4&from=paste&height=563&id=u7f3defdc&originHeight=704&originWidth=1387&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=371474&status=done&style=none&taskId=u39aef499-cecc-4d0c-8012-b370fb46894&title=&width=1109.6)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690873264947-e7591d3a-3351-45ee-9dcc-2cb5a4e40c84.png#averageHue=%23f4f7f2&clientId=u16ef33c5-5b8d-4&from=paste&height=639&id=u0ba1225b&originHeight=799&originWidth=1351&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=638397&status=done&style=none&taskId=u86f41cd9-90fe-41a3-9093-839e280e3e4&title=&width=1080.8)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690873378973-8a1ae693-d68c-47c7-b495-79c4323afc3c.png#averageHue=%23ecebea&clientId=u16ef33c5-5b8d-4&from=paste&height=397&id=uc152aab8&originHeight=496&originWidth=1168&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=215507&status=done&style=none&taskId=u04e92275-cbd8-4376-a678-5b8cd2b2ac3&title=&width=934.4)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1690873605099-b8c17b02-1fc9-4ec5-ad95-448e5a644715.png#averageHue=%23f5f4f4&clientId=u16ef33c5-5b8d-4&from=paste&height=611&id=u17ec393b&originHeight=764&originWidth=1239&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=517135&status=done&style=none&taskId=ue6d44281-d5c8-459b-878e-7d1b948b0e5&title=&width=991.2)


分布式搜索的引擎：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691998519909-f0a0eed2-c8d4-4f2f-afdf-de544fb4ec15.png#averageHue=%23f6f6f6&clientId=u9da8e819-9f02-4&from=paste&height=608&id=ue169e4ef&originHeight=760&originWidth=1265&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=260319&status=done&style=none&taskId=ud368b3e4-b44a-4b6a-aafa-7875f1ba523&title=&width=1012)
搜索的语法结构写法：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691998652270-f94e1e7f-cb28-4454-a2e5-17d48d91d282.png#averageHue=%23f7f7f7&clientId=u9da8e819-9f02-4&from=paste&height=192&id=u90709ef5&originHeight=240&originWidth=727&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=44608&status=done&style=none&taskId=u87ccafc7-0def-4128-b06c-4b6b89592c3&title=&width=581.6)
match单个词匹配搜索和multi_match多个词匹配搜索：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691998787491-a048d462-d362-4f98-a35f-243cc36c9133.png#averageHue=%23f5f5f5&clientId=u9da8e819-9f02-4&from=paste&height=565&id=ud2559f04&originHeight=706&originWidth=1243&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=244963&status=done&style=none&taskId=u0f47690f-b6d5-4400-8280-6b6b6231ec6&title=&width=994.4)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691999106577-5c0cc9c7-2916-4b55-8ed6-61e5f8064a0c.png#averageHue=%23f2f2f2&clientId=u9da8e819-9f02-4&from=paste&height=238&id=u5152e0da&originHeight=298&originWidth=856&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=74224&status=done&style=none&taskId=u29a4a3ea-f967-4586-9973-f5d0b91fef0&title=&width=684.8)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691999502426-3a8a34fa-0e2e-45ad-a700-8febab61ecf1.png#averageHue=%23f4f4f4&clientId=u9da8e819-9f02-4&from=paste&height=449&id=u427fe960&originHeight=561&originWidth=1173&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=213614&status=done&style=none&taskId=u3d54aee7-0917-4684-ab93-74e38a9eee9&title=&width=938.4)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691999070018-e0855aae-1f90-4d85-8176-b4cb1493a8b6.png#averageHue=%23e8edf2&clientId=u9da8e819-9f02-4&from=paste&height=428&id=u058d0c84&originHeight=535&originWidth=1505&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=481613&status=done&style=none&taskId=uec8d88b5-8922-4c66-a3f2-99c02aa21e3&title=&width=1204)
地理查询geo_bounding_box和geo_distance：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691999872362-08e65b21-91ae-4050-b2cc-7b033319d0a0.png#averageHue=%23ebebd9&clientId=u9da8e819-9f02-4&from=paste&height=510&id=u739b693e&originHeight=637&originWidth=1480&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=959078&status=done&style=none&taskId=u99d314f7-c143-4b2d-8543-13bab6980f1&title=&width=1184)
geo_distance
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1691999917468-c05f40bc-ba22-40d3-8a99-b80f64b695c0.png#averageHue=%23eaead6&clientId=u9da8e819-9f02-4&from=paste&height=478&id=u9ed2f76e&originHeight=597&originWidth=1327&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=862540&status=done&style=none&taskId=u6c727e49-f8d7-482f-8fa7-3f7c12c3e9e&title=&width=1061.6)
es的复合查询：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692000440261-da0c2ea6-5be1-4fb4-ae27-fdf89b21eb3f.png#averageHue=%23f4f5ef&clientId=u9da8e819-9f02-4&from=paste&height=567&id=u7051f551&originHeight=709&originWidth=1468&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=506264&status=done&style=none&taskId=ue88e2619-1aed-40e4-84d4-63312936271&title=&width=1174.4)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692000581992-229f810f-0dad-4e72-9bf5-62544475b1b8.png#averageHue=%23f1f1f1&clientId=u9da8e819-9f02-4&from=paste&height=184&id=ucc571032&originHeight=230&originWidth=677&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=56265&status=done&style=none&taskId=u81c4db04-1ac7-45b6-b162-af02282d9e6&title=&width=541.6)
复合查询的另一种：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692000882532-1abaf3c9-ca23-4794-8f14-b84a079797b2.png#averageHue=%23f7f8f4&clientId=u9da8e819-9f02-4&from=paste&height=558&id=u11dfd198&originHeight=698&originWidth=1450&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=418795&status=done&style=none&taskId=u908bc1ef-6967-4674-9f85-0c924c65a35&title=&width=1160)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692001006556-54b6c216-6104-4d50-9449-e7f2b09430db.png#averageHue=%23f0f0f0&clientId=u9da8e819-9f02-4&from=paste&height=286&id=u9f49eaca&originHeight=357&originWidth=634&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=82987&status=done&style=none&taskId=uf8d48ade-4cb1-4eec-b506-bc605596931&title=&width=507.2)
查询后的结果排序：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692001365741-51e221b9-3827-4707-812a-d2c0d3d4e4c3.png#averageHue=%23eeefed&clientId=u9da8e819-9f02-4&from=paste&height=553&id=u5ca5a851&originHeight=691&originWidth=1439&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=314791&status=done&style=none&taskId=u6d83f8f4-c6ef-40cf-b593-8d083fe3e14&title=&width=1151.2)
查询后的结果分页：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692002106990-04a5903e-771c-4470-b551-a7cb98c18389.png#averageHue=%23efefef&clientId=u9da8e819-9f02-4&from=paste&height=575&id=u4767919d&originHeight=719&originWidth=1205&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=219211&status=done&style=none&taskId=ue240a768-ce65-4e8f-9972-44bcce23425&title=&width=964)
总结
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692002735850-8f897609-2e7e-499c-9464-12489cb55815.png#averageHue=%23f7f6f6&clientId=u9da8e819-9f02-4&from=paste&height=590&id=u75e3a787&originHeight=738&originWidth=907&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=285036&status=done&style=none&taskId=uf59744f3-e593-436c-9ee2-7fb9efb299f&title=&width=725.6)

javaAPI实现es查询:
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692003672841-4fc285bc-ec5d-4016-a358-220d3879a1d0.png#averageHue=%23eff0ee&clientId=u9da8e819-9f02-4&from=paste&height=548&id=ubd32d70f&originHeight=685&originWidth=1413&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=311494&status=done&style=none&taskId=u3ffbd1e8-158b-4dcc-9c02-a1e6bed65e1&title=&width=1130.4)
JavaAPI查询的结果解析：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692004503128-024a2d65-e639-463e-bde6-dc104d8a42cd.png#averageHue=%23eef2ec&clientId=u9da8e819-9f02-4&from=paste&height=554&id=ucda3ffad&originHeight=693&originWidth=1564&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=799698&status=done&style=none&taskId=u70a1546e-5b63-47ad-9c1e-5b5fb49c1c0&title=&width=1251.2)
JavaAPI--match和match_multiMatch查询条件写法：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692079934664-c7920d15-8f01-4e2f-8bbd-e2b1f14ede4d.png#averageHue=%23f5f5f5&clientId=ue1d08d10-50cd-4&from=paste&height=526&id=u0f2d79cd&originHeight=658&originWidth=1392&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=282575&status=done&style=none&taskId=ua65152b1-58a4-4aa1-8dc6-cac54803ec8&title=&width=1113.6)
JavaAPI--精确查询term和range范围查询条件写法：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692080105140-4d1846d0-9815-44a0-ae51-71c505d1ee29.png#averageHue=%23f6f7f5&clientId=ue1d08d10-50cd-4&from=paste&height=478&id=u7f50ca56&originHeight=598&originWidth=1358&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=229433&status=done&style=none&taskId=u5a053151-68f4-4188-891e-3618cf5440b&title=&width=1086.4)
JavaAPI--复合查询bool条件写法（多一步声明BoolQuery对象构建条件）：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692080236451-d1439eed-39e6-4834-9d0c-5de56db119c8.png#averageHue=%23f5f5f5&clientId=ue1d08d10-50cd-4&from=paste&height=511&id=u4a89b46f&originHeight=639&originWidth=1408&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=265792&status=done&style=none&taskId=u6c0ea678-bdda-431c-bb7d-e5d5f0a44b6&title=&width=1126.4)
JavaAPI组合查询权重设置：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692087848896-5bd501e0-61c9-4c89-b538-b66c5a696cc6.png#averageHue=%23f1f1ec&clientId=ue1d08d10-50cd-4&from=paste&height=542&id=TIZS9&originHeight=677&originWidth=1497&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=466181&status=done&style=none&taskId=u38a17533-c671-4dbe-b167-49259aefa75&title=&width=1197.6)
JavaAPI查询结果的分页排序：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692080433235-8f3e274e-dd32-48c4-859c-7d526602573c.png#averageHue=%23f5f7f2&clientId=ue1d08d10-50cd-4&from=paste&height=440&id=u89ad4833&originHeight=550&originWidth=1393&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=268575&status=done&style=none&taskId=uc69ffaff-99e5-40a7-bae8-d4abf463523&title=&width=1114.4)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692087022776-609f656c-4efa-4493-a2b3-cf6697e56400.png#averageHue=%23f3f2ea&clientId=ue1d08d10-50cd-4&from=paste&height=484&id=ubda5c2e1&originHeight=605&originWidth=1366&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=332694&status=done&style=none&taskId=ufbba1599-4a72-4451-bd31-2ff076beb77&title=&width=1092.8)
JavaAPI查询结果的关键字高亮设置：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692080500949-7aa0a375-60d2-45dc-8c1f-e78eb9467d1b.png#averageHue=%23fbfbfb&clientId=ue1d08d10-50cd-4&from=paste&height=523&id=u592f1f89&originHeight=654&originWidth=1401&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=246976&status=done&style=none&taskId=u439fa855-8dd3-4095-ae31-2d82b46a0bc&title=&width=1120.8)
高亮结果需要另外的解析：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692080652867-abe1acab-fd92-4485-a810-a6164d55d547.png#averageHue=%23f0f0e9&clientId=ue1d08d10-50cd-4&from=paste&height=577&id=u19e12c68&originHeight=721&originWidth=1440&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=592527&status=done&style=none&taskId=ufc4d43f1-4986-4a57-a686-c1f397d0ebb&title=&width=1152)

![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692088550887-23649b96-b5e9-4ab4-891b-060a7184e645.png#averageHue=%23f3f3f3&clientId=ue1d08d10-50cd-4&from=paste&height=506&id=u483a5ccc&originHeight=632&originWidth=657&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=110490&status=done&style=none&taskId=u7964a0ea-3864-4927-99f2-2254acb4276&title=&width=525.6)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692088604714-10efb2f5-66a0-451b-ab6a-e96d92e4428b.png#averageHue=%23f1f1f1&clientId=ue1d08d10-50cd-4&from=paste&height=371&id=ub395224e&originHeight=464&originWidth=1130&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=297550&status=done&style=none&taskId=u0c201a40-bcca-4e17-a365-a11c03d7e41&title=&width=904)
聚合的DSL语言：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692089334739-ca2d2808-78c0-4b09-8c2c-325154361f4d.png#averageHue=%23ebeff4&clientId=ue1d08d10-50cd-4&from=paste&height=321&id=u0d80cfea&originHeight=401&originWidth=1465&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=321907&status=done&style=none&taskId=u5b0cac0f-fd27-4293-8755-b783f2058ad&title=&width=1172)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692089442533-f80f71d3-c19d-4631-9825-01eae34665b0.png#averageHue=%23f8f9f6&clientId=ue1d08d10-50cd-4&from=paste&height=540&id=u51b47bc2&originHeight=675&originWidth=1334&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=229572&status=done&style=none&taskId=ud340f0b3-a247-45aa-acef-410f9b282d3&title=&width=1067.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692089494523-575481e8-9d55-4def-a3f3-547522687ab0.png#averageHue=%23f6f6f6&clientId=ue1d08d10-50cd-4&from=paste&height=439&id=uaf10d017&originHeight=549&originWidth=920&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=107603&status=done&style=none&taskId=ub89f8a99-a11f-401f-936c-4382250cef6&title=&width=736)
嵌套聚合：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692089713993-d744e13d-39f8-4a3d-ad6f-76eabcb081ae.png#averageHue=%23e1e9f1&clientId=ue1d08d10-50cd-4&from=paste&height=398&id=u05001f53&originHeight=498&originWidth=1213&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=378997&status=done&style=none&taskId=u0e59a26d-6f3a-465b-bf93-b2a5c3d2af0&title=&width=970.4)

RestClientAPI实现聚合：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692089844596-52b4462d-14a1-4ab1-a77a-70f0b7e5e40f.png#averageHue=%23f4f4ed&clientId=ue1d08d10-50cd-4&from=paste&height=535&id=uf5b8cc4a&originHeight=669&originWidth=1281&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=388332&status=done&style=none&taskId=u450d388d-fcc1-4f73-a931-2bebcace41b&title=&width=1024.8)
聚合结果解析：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692090014908-a7d46c94-5950-45d1-9a07-115477feb1b6.png#averageHue=%23f0f0e7&clientId=ue1d08d10-50cd-4&from=paste&height=558&id=u33c0d044&originHeight=697&originWidth=1396&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=659556&status=done&style=none&taskId=u6d7e780b-58ad-4014-ab52-5deb018469a&title=&width=1116.8)


拼音分词器（自动补全功能）
将拼音分词器插件的安装包放入虚拟机docker的es插件文件夹plugins里，docker restart es即可；
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692168431937-7dbd93bb-8021-4603-b672-42b7a275e4cd.png#averageHue=%23f4f4f4&clientId=u153618ae-8856-4&from=paste&height=483&id=udaae75ed&originHeight=604&originWidth=859&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=129705&status=done&style=none&taskId=u4031861c-4368-4a32-8192-5345ef5f62b&title=&width=687.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692168503711-944aa579-c26a-4a00-ab44-fe0764397277.png#averageHue=%23f0f0f0&clientId=u153618ae-8856-4&from=paste&height=535&id=u4a04d00d&originHeight=669&originWidth=1337&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=295169&status=done&style=none&taskId=ufe0bb1be-8a5e-45f2-b255-a7b6ec24c1c&title=&width=1069.6)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692168608932-1674cdad-0bd2-4ffa-b088-d21ac9bb63bd.png#averageHue=%23f8f9f5&clientId=u153618ae-8856-4&from=paste&height=568&id=u645354f7&originHeight=710&originWidth=1504&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=462790&status=done&style=none&taskId=u937a5d8a-57e9-4908-b5d5-20e6771f5c5&title=&width=1203.2)
创建索引时用自定义分词器，搜索是用精准的已有的分词器
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692169080249-aad5fd02-c3e4-438a-8dcc-22295ead5e2c.png#averageHue=%23f6f7f5&clientId=u153618ae-8856-4&from=paste&height=563&id=u4585ac74&originHeight=704&originWidth=1333&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=254074&status=done&style=none&taskId=u8b1b5fbb-f133-45e0-a84b-db54a1045e0&title=&width=1066.4)

restApi的自动补全：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692170578907-3c8ffc25-4aee-42e6-b67d-8d49577cf4f1.png#averageHue=%23f3f4ee&clientId=u153618ae-8856-4&from=paste&height=566&id=u532bc1d5&originHeight=708&originWidth=1394&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=529834&status=done&style=none&taskId=u84ab56b4-a6c1-4f3a-b2e9-d6e7064027f&title=&width=1115.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692170723926-61902600-b811-454d-ae1b-52331907e1c4.png#averageHue=%23f2f3ed&clientId=u153618ae-8856-4&from=paste&height=603&id=u360315c6&originHeight=754&originWidth=1500&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=525583&status=done&style=none&taskId=u020f52ad-d469-4ee9-8ed4-c8d5790913f&title=&width=1200)


MySQL与elasticsearch数据同步：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692172039870-61af39a8-1ba5-4a2b-9178-336015b67002.png#averageHue=%23eeeded&clientId=u153618ae-8856-4&from=paste&height=548&id=u2e3ad7c2&originHeight=685&originWidth=1314&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=215703&status=done&style=none&taskId=uf6c7df05-e180-47ff-aa70-ed74a983437&title=&width=1051.2)

es的集群部署：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692175237932-ed8a3e22-96df-47e4-9916-4f11449fa84f.png#averageHue=%23e9e9e9&clientId=u153618ae-8856-4&from=paste&height=662&id=u0d89b949&originHeight=827&originWidth=945&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=203130&status=done&style=none&taskId=ub3019df5-4113-4eee-9512-92294561ab3&title=&width=756)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692175406630-03014799-c37a-418e-b0d8-fb4a9d28cb48.png#averageHue=%23d4c6c5&clientId=u153618ae-8856-4&from=paste&height=546&id=u6fb43f48&originHeight=682&originWidth=1335&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=278794&status=done&style=none&taskId=u578902bd-ce7c-4440-bd27-845abe1f898&title=&width=1068)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692177338452-298b6f8c-c8a0-4116-9c86-de9d06829774.png#averageHue=%23f2f2f2&clientId=u153618ae-8856-4&from=paste&height=359&id=u4659181c&originHeight=449&originWidth=854&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=110189&status=done&style=none&taskId=u03e73005-393e-4379-8d7b-c57027a3b2d&title=&width=683.2)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692177476260-14b52c55-6ddd-43e7-b43d-096e48b20f32.png#averageHue=%23f4f4f4&clientId=u153618ae-8856-4&from=paste&height=218&id=u3bc5cff9&originHeight=273&originWidth=890&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=62294&status=done&style=none&taskId=u3d11d696-7ca9-4760-9653-1723a51f16a&title=&width=712)

高级篇
Sentinel（官网地址：[https://sentinelguard.io/zh-cn/index.html](https://sentinelguard.io/zh-cn/index.html)
）微服务的安全保护
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692241938276-03cfc6d4-25a1-4ec2-bae3-4b8f2f07e1aa.png#averageHue=%23f2efeb&clientId=uefce100e-091e-4&from=paste&height=536&id=u7153f210&originHeight=670&originWidth=1413&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=393708&status=done&style=none&taskId=u2ba2d3ed-7754-441c-aa65-a8a3c82bcb4&title=&width=1130.4)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692242019823-ed9232f3-3a9f-40e1-9ad6-9812671909ae.png#averageHue=%23efefef&clientId=uefce100e-091e-4&from=paste&height=400&id=udae34302&originHeight=500&originWidth=955&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=107034&status=done&style=none&taskId=uf2146ce0-d466-468c-a25a-6dc57126496&title=&width=764)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692243342209-733400a9-442a-45cc-8d17-4b0cea31394e.png#averageHue=%23f7f7f7&clientId=uefce100e-091e-4&from=paste&height=492&id=u9fc8cf8f&originHeight=615&originWidth=1369&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=220757&status=done&style=none&taskId=u8d3d8b14-fd7e-4743-af8a-14a515273e7&title=&width=1095.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692693817570-48f8930c-a8bb-44ed-8a18-1c7668813123.png#averageHue=%23f0efef&clientId=u8cc33e7c-6c5f-4&from=paste&height=476&id=ufa6b5dca&originHeight=595&originWidth=1379&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=223630&status=done&style=none&taskId=u7c500207-bf87-4b6a-b9eb-e8cadcb49a6&title=&width=1103.2)
簇点链路的流控设置：为了预防服务出现高并发时的问题
1.流控直接限制（默认设置）：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692693989765-099d99dd-b481-45e2-be9e-2f86d384df27.png#averageHue=%23f7f4f4&clientId=u8cc33e7c-6c5f-4&from=paste&height=507&id=uf9951ec6&originHeight=634&originWidth=1339&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=168939&status=done&style=none&taskId=u378345dd-f890-4c15-bd0e-32454d5703a&title=&width=1071.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692694019546-62cc74ef-ccca-47e9-96b1-ae1bca3bfa26.png#averageHue=%23f7f5f5&clientId=u8cc33e7c-6c5f-4&from=paste&height=502&id=u7d422932&originHeight=628&originWidth=1306&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=184040&status=done&style=none&taskId=ud3b423ea-0634-4f77-8f8a-ad785640a70&title=&width=1044.8)
2.流控关联限制：对查询做流控，不直接流控查询资源，而是通过流控关联的更新资源达到目的
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692694415816-a80683aa-50e4-4283-8a26-b89731c20be2.png#averageHue=%23d9e2db&clientId=u8cc33e7c-6c5f-4&from=paste&height=569&id=uc87d69e1&originHeight=711&originWidth=1304&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=237530&status=done&style=none&taskId=u29bf8d5f-23e0-4c13-b087-983e4e959f6&title=&width=1043.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692694553903-a8abb538-d16b-4cd7-90fd-84f199051310.png#averageHue=%23f5f5f4&clientId=u8cc33e7c-6c5f-4&from=paste&height=524&id=u2ba7e6fd&originHeight=655&originWidth=1066&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=136632&status=done&style=none&taskId=u326a997d-2586-4efe-9000-771b1f27031&title=&width=852.8)

3.流控链路：
开启识别出controller以外的链路资源@SentinelResource，关闭只有controller是资源的默认设置false
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692694713326-cf910fc8-b1f1-4590-82ef-5a2ab8069809.png#averageHue=%23f8f7f7&clientId=u8cc33e7c-6c5f-4&from=paste&height=437&id=u9ca2624c&originHeight=546&originWidth=1288&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=222993&status=done&style=none&taskId=u797feec1-bb49-4589-af80-aafccef9461&title=&width=1030.4)
控制层新增和查询都会调用业务层的查询，对业务层的接口声明为资源，再控制台设置要求的链路请求进行限制
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692695089091-969ae368-a280-45f9-938e-7079119022a3.png#averageHue=%23add1be&clientId=u8cc33e7c-6c5f-4&from=paste&height=510&id=uda63bbdc&originHeight=638&originWidth=1346&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=263542&status=done&style=none&taskId=u30660dd8-2f30-4734-a8bc-a6cc9355089&title=&width=1076.8)流控模式的小结
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692695453065-3cf04075-151d-4996-9383-bec0f595b519.png#averageHue=%23f3f3f3&clientId=u8cc33e7c-6c5f-4&from=paste&height=287&id=u73f6ea60&originHeight=359&originWidth=839&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=68971&status=done&style=none&taskId=u93171631-e083-4499-b51b-1d4f911567b&title=&width=671.2)

流控效果的设置：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692695540803-2f1e98e6-3c8f-4ddd-8790-f927f84fabd9.png#averageHue=%23f7f6f6&clientId=u8cc33e7c-6c5f-4&from=paste&height=456&id=ucfba1e30&originHeight=570&originWidth=1363&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=236920&status=done&style=none&taskId=ub61bf56a-b1f8-4168-8f28-12f9d8db5fc&title=&width=1090.4)
1.快速失败：默认
2.预热效果：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692695989344-0ff617f1-e1cb-4746-9e10-18fe57e2f031.png#averageHue=%23f9f7f7&clientId=u8cc33e7c-6c5f-4&from=paste&height=334&id=ua183bfd5&originHeight=418&originWidth=1391&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=194437&status=done&style=none&taskId=u6b30f06a-6466-41d3-9a6b-593a6072098&title=&width=1112.8)
3.排队等待：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692696142876-448dddd3-1702-4b14-b927-45ba8cda9d63.png#averageHue=%23f6f6f4&clientId=u8cc33e7c-6c5f-4&from=paste&height=559&id=u8806975a&originHeight=699&originWidth=1323&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=352444&status=done&style=none&taskId=uebc7fcf7-9c79-45f4-ac49-2c491b8478c&title=&width=1058.4)
流控效果小结：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692696237970-6617be25-3c3e-4597-b235-3d1551ef4f46.png#averageHue=%23eeeeee&clientId=u8cc33e7c-6c5f-4&from=paste&height=314&id=uff9e9587&originHeight=393&originWidth=854&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=99700&status=done&style=none&taskId=ube209a7b-d1ec-4cc4-ba4a-97eaeb649c1&title=&width=683.2)
对单个请求参数相同的请求进行限制----热点参数流控
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692696525268-ec1c2cad-351c-4e17-bf17-5333cbdab485.png#averageHue=%23acc7ac&clientId=u8cc33e7c-6c5f-4&from=paste&height=621&id=u27fa081d&originHeight=776&originWidth=1710&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=328675&status=done&style=none&taskId=u8ccfe425-bb2f-404d-92a3-0667145692a&title=&width=1368)


熔断降级
1.结合feign配置sentinel
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692771164871-688b0727-5574-4a08-9ab9-991a5d4ce02b.png#averageHue=%23efefef&clientId=uaa5ca1f7-9db0-4&from=paste&height=462&id=ud60cb57a&originHeight=578&originWidth=1350&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=242060&status=done&style=none&taskId=u794198f6-385a-4b42-946e-bf769849ade&title=&width=1080)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692771229837-4ae922de-4d2a-47c5-8e40-67348e80a685.png#averageHue=%23edf2ec&clientId=uaa5ca1f7-9db0-4&from=paste&height=467&id=u83f17a17&originHeight=584&originWidth=1121&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=358280&status=done&style=none&taskId=uf7295784-8e8d-4d89-b037-ff76d7be69f&title=&width=896.8)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692771298176-504c50e1-55dd-4ef4-8bfc-2419f6e99614.png#averageHue=%23eaebde&clientId=uaa5ca1f7-9db0-4&from=paste&height=442&id=ue59d396f&originHeight=553&originWidth=1219&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=249660&status=done&style=none&taskId=u0278579f-1564-4559-8f62-e29b0f23271&title=&width=975.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692771494565-df78c949-3591-4f68-aa0f-13f59c158d83.png#averageHue=%23f4f4f4&clientId=uaa5ca1f7-9db0-4&from=paste&height=425&id=u9ce843f6&originHeight=531&originWidth=769&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=87032&status=done&style=none&taskId=ue32113a6-d2d4-4a42-8bc5-af7c5e6e8a2&title=&width=615.2)
线程隔离（流控）：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692771903959-822fa2b9-8e45-4842-a15b-6b52a81eecfa.png#averageHue=%23f3f2f2&clientId=uaa5ca1f7-9db0-4&from=paste&height=463&id=u28d82ef3&originHeight=579&originWidth=1201&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=163539&status=done&style=none&taskId=ub3a76b96-ac9e-4c8a-ab42-580b89702a5&title=&width=960.8)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692772061776-43739b02-398e-4b9f-9009-51e29fb395c5.png#averageHue=%23f6f1ef&clientId=uaa5ca1f7-9db0-4&from=paste&height=486&id=u90f25f5f&originHeight=608&originWidth=1310&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=254181&status=done&style=none&taskId=u32e46c0f-44b3-4f01-82e2-2acb99bfa8c&title=&width=1048)
熔断策略第一种（降级）-----慢调用比例
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692772512381-9676fc2e-fea0-4e8c-8dcb-64e9b01dedf2.png#averageHue=%23f0f0f0&clientId=uaa5ca1f7-9db0-4&from=paste&height=563&id=ud3c95c7a&originHeight=704&originWidth=1379&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=258607&status=done&style=none&taskId=u9bddf7eb-6f6a-419f-b415-b1b696d0e1d&title=&width=1103.2)
熔断策略第一种（降级）-----慢调用比例
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692772814429-5241418f-5c46-4035-988e-a9ca26a445e9.png#averageHue=%23f1efef&clientId=uaa5ca1f7-9db0-4&from=paste&height=550&id=ub7c049b1&originHeight=688&originWidth=1385&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=282717&status=done&style=none&taskId=u6820d54d-e3b4-4e13-851e-64e35877b25&title=&width=1108)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692781714294-b6240596-e226-484d-917b-6f60f3e4ee59.png#averageHue=%23bab9b9&clientId=uaa5ca1f7-9db0-4&from=paste&height=458&id=u314fa0b1&originHeight=573&originWidth=1455&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=225251&status=done&style=none&taskId=u8353d7e7-b00c-4a4c-bd90-1a6af67c824&title=&width=1164)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692781757315-95e287bb-f5f1-44ba-ab81-306fea28fae4.png#averageHue=%23efefef&clientId=uaa5ca1f7-9db0-4&from=paste&height=309&id=u47114fbe&originHeight=386&originWidth=839&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=95103&status=done&style=none&taskId=u6af9f07c-c401-4508-84d0-e03f382d133&title=&width=671.2)

授权规则的配置：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692783224603-4297b4ec-48f6-450e-96c3-9eda5f050d78.png#averageHue=%23dce0d8&clientId=uaa5ca1f7-9db0-4&from=paste&height=549&id=uf561480d&originHeight=686&originWidth=1259&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=311502&status=done&style=none&taskId=u24a864f3-000a-4cc2-94be-8ad9adef27f&title=&width=1007.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692783253119-466c0417-a7e5-4209-9214-69bf844f1768.png#averageHue=%23dfd4d0&clientId=uaa5ca1f7-9db0-4&from=paste&height=520&id=ue5e2b370&originHeight=650&originWidth=1044&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=162910&status=done&style=none&taskId=u3e97561e-fac4-4fac-8952-c565580f92e&title=&width=835.2)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692783421031-85fdccae-0fbd-459c-b81f-a9e68d5ceefa.png#averageHue=%23b4b3b3&clientId=uaa5ca1f7-9db0-4&from=paste&height=448&id=ue53eefe4&originHeight=560&originWidth=1398&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=256357&status=done&style=none&taskId=u2833113f-80b0-40ce-aaa2-8403418d975&title=&width=1118.4)
自定义异常结果：判断是流控抛出的异常、降级、热点，授权问题
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692783721265-2e6160cc-d0bf-46cd-be2d-8dd05ec78392.png#averageHue=%23dbdad5&clientId=uaa5ca1f7-9db0-4&from=paste&height=382&id=uc13457c9&originHeight=478&originWidth=1469&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=179795&status=done&style=none&taskId=u7d3d35e7-4d14-4212-863b-387740cf656&title=&width=1175.2)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692783873834-289c0e4a-b4bd-43ee-9f0b-45eb347d5be4.png#averageHue=%23eaf0ea&clientId=uaa5ca1f7-9db0-4&from=paste&height=524&id=u5b729249&originHeight=655&originWidth=1293&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=416096&status=done&style=none&taskId=uc414d2cb-1c9a-4257-8c36-ab09e75b73d&title=&width=1034.4)
sentinel配置的持久化：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1692795699249-de0f4ba7-8877-4003-b2cf-a2cdc3cf8c3b.png#averageHue=%23dedddd&clientId=ufec10740-6622-4&from=paste&id=uf3960101&originHeight=1080&originWidth=1920&originalType=url&ratio=1.25&rotation=0&showTitle=false&size=329945&status=done&style=none&taskId=ub77e1d98-9c90-4de2-8c2b-fb9e2de2ee2&title=)


分布式redis
redis集群哨兵（sentinel）监测redis的主从切换，以及redisTemplate的使用：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1693210165203-25de239b-afb0-4956-9101-4071a76a0964.png#averageHue=%23f2f4f0&clientId=u05c7146e-2da0-4&from=paste&height=534&id=u2601dd15&originHeight=668&originWidth=1245&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=369071&status=done&style=none&taskId=uda45b981-254d-4949-b49a-2b2fdb37d20&title=&width=996)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1693210284518-39470d1a-f050-4201-9f62-c38db35b86be.png#averageHue=%23e9ede9&clientId=u05c7146e-2da0-4&from=paste&height=447&id=ue9534321&originHeight=559&originWidth=1314&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=342517&status=done&style=none&taskId=u7238ea68-e1b6-4f6f-9532-ac2e6d2ed8a&title=&width=1051.2)
redis的分片集群（多个master和salve）：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1693214114951-2cee6f71-4507-4190-a319-23473148980e.png#averageHue=%23f1f1f1&clientId=uf7b21e6d-a28d-4&from=paste&height=510&id=u61488bf7&originHeight=638&originWidth=1094&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=218012&status=done&style=none&taskId=u839304f9-1d39-41cc-b13b-894e076f181&title=&width=875.2)



SpringCloud的部分面试问题：
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1693557898551-ed0d7d35-f10a-4c1c-9d13-bd6f7d1bfc1f.png#averageHue=%23f3f2f2&clientId=u4e88c086-c571-4&from=paste&height=522&id=uf2787732&originHeight=653&originWidth=1128&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=181385&status=done&style=none&taskId=uf2e5c033-18b7-4506-8c33-d735f079a99&title=&width=902.4)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1693560326089-4af8d330-45db-4860-9b2f-b4d7a187f5d6.png#averageHue=%23f4f4f4&clientId=u4e88c086-c571-4&from=paste&height=341&id=u8ee87d23&originHeight=426&originWidth=1333&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=195524&status=done&style=none&taskId=u5cfa117a-3968-4e1e-919e-f5838c83579&title=&width=1066.4)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1693659830597-cd0c11f5-b3e7-4be6-999a-eb10d9d0643a.png#averageHue=%23f0f0f0&clientId=u66d8fa50-1cab-4&from=paste&height=335&id=ucb3888e5&originHeight=419&originWidth=1356&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=184133&status=done&style=none&taskId=ueba61f99-ebfb-4015-8fc2-aa65dfc6bfc&title=&width=1084.8)![image.png](https://cdn.nlark.com/yuque/0/2023/png/33631138/1693729928447-f324ade8-20ed-4990-bcf7-00b2d1dd7ef7.png#averageHue=%23e4e3e3&clientId=u36956048-8d0b-4&from=paste&height=439&id=uf7b84808&originHeight=549&originWidth=1513&originalType=binary&ratio=1.25&rotation=0&showTitle=false&size=341311&status=done&style=none&taskId=u0347bb78-4547-4855-bd34-90f186c9e53&title=&width=1210.4)
